"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TcfCaV1=void 0;const EncodableBoolean_js_1=require("../datatype/EncodableBoolean.js"),EncodableDatetime_js_1=require("../datatype/EncodableDatetime.js"),EncodableFlexibleBitfield_js_1=require("../datatype/EncodableFlexibleBitfield.js"),EncodableFixedBitfield_js_1=require("../datatype/EncodableFixedBitfield.js"),EncodableFixedInteger_js_1=require("../datatype/EncodableFixedInteger.js"),EncodableFixedString_js_1=require("../datatype/EncodableFixedString.js"),AbstractEncodableSegmentedBitStringSection_js_1=require("./AbstractEncodableSegmentedBitStringSection.js"),EncodableOptimizedFixedRange_js_1=require("../datatype/EncodableOptimizedFixedRange.js"),DecodingError_js_1=require("../error/DecodingError.js"),TcfCaV1Field_js_1=require("../field/TcfCaV1Field.js"),CompressedBase64UrlEncoder_js_1=require("../datatype/encoder/CompressedBase64UrlEncoder.js");class TcfCaV1 extends AbstractEncodableSegmentedBitStringSection_js_1.AbstractEncodableSegmentedBitStringSection{constructor(e){let i=new Map,t=new Date;i.set(TcfCaV1Field_js_1.TcfCaV1Field.VERSION.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(6,TcfCaV1.VERSION)),i.set(TcfCaV1Field_js_1.TcfCaV1Field.CREATED.toString(),new EncodableDatetime_js_1.EncodableDatetime(t)),i.set(TcfCaV1Field_js_1.TcfCaV1Field.LAST_UPDATED.toString(),new EncodableDatetime_js_1.EncodableDatetime(t)),i.set(TcfCaV1Field_js_1.TcfCaV1Field.CMP_ID.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(12,0)),i.set(TcfCaV1Field_js_1.TcfCaV1Field.CMP_VERSION.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(12,0)),i.set(TcfCaV1Field_js_1.TcfCaV1Field.CONSENT_SCREEN.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(6,0)),i.set(TcfCaV1Field_js_1.TcfCaV1Field.CONSENT_LANGUAGE.toString(),new EncodableFixedString_js_1.EncodableFixedString(2,"EN")),i.set(TcfCaV1Field_js_1.TcfCaV1Field.VENDOR_LIST_VERSION.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(12,0)),i.set(TcfCaV1Field_js_1.TcfCaV1Field.TCF_POLICY_VERSION.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(6,2)),i.set(TcfCaV1Field_js_1.TcfCaV1Field.USE_NON_STANDARD_STACKS.toString(),new EncodableBoolean_js_1.EncodableBoolean(!1)),i.set(TcfCaV1Field_js_1.TcfCaV1Field.SPECIAL_FEATURE_EXPRESS_CONSENT.toString(),new EncodableFixedBitfield_js_1.EncodableFixedBitfield([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),i.set(TcfCaV1Field_js_1.TcfCaV1Field.PURPOSES_EXPRESS_CONSENT.toString(),new EncodableFixedBitfield_js_1.EncodableFixedBitfield([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),i.set(TcfCaV1Field_js_1.TcfCaV1Field.PURPOSES_IMPLIED_CONSENT.toString(),new EncodableFixedBitfield_js_1.EncodableFixedBitfield([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),i.set(TcfCaV1Field_js_1.TcfCaV1Field.VENDOR_EXPRESS_CONSENT.toString(),new EncodableOptimizedFixedRange_js_1.EncodableOptimizedFixedRange([])),i.set(TcfCaV1Field_js_1.TcfCaV1Field.VENDOR_IMPLIED_CONSENT.toString(),new EncodableOptimizedFixedRange_js_1.EncodableOptimizedFixedRange([])),i.set(TcfCaV1Field_js_1.TcfCaV1Field.SEGMENT_TYPE.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(3,3)),i.set(TcfCaV1Field_js_1.TcfCaV1Field.PUB_PURPOSES_EXPRESS_CONSENT.toString(),new EncodableFixedBitfield_js_1.EncodableFixedBitfield([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),i.set(TcfCaV1Field_js_1.TcfCaV1Field.PUB_PURPOSES_IMPLIED_CONSENT.toString(),new EncodableFixedBitfield_js_1.EncodableFixedBitfield([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]));let d=new EncodableFixedInteger_js_1.EncodableFixedInteger(6,0);i.set(TcfCaV1Field_js_1.TcfCaV1Field.NUM_CUSTOM_PURPOSES.toString(),d),i.set(TcfCaV1Field_js_1.TcfCaV1Field.CUSTOM_PURPOSES_EXPRESS_CONSENT.toString(),new EncodableFlexibleBitfield_js_1.EncodableFlexibleBitfield((()=>d.getValue()),[])),i.set(TcfCaV1Field_js_1.TcfCaV1Field.CUSTOM_PURPOSES_IMPLIED_CONSENT.toString(),new EncodableFlexibleBitfield_js_1.EncodableFlexibleBitfield((()=>d.getValue()),[])),super(i,[[TcfCaV1Field_js_1.TcfCaV1Field.VERSION.toString(),TcfCaV1Field_js_1.TcfCaV1Field.CREATED.toString(),TcfCaV1Field_js_1.TcfCaV1Field.LAST_UPDATED.toString(),TcfCaV1Field_js_1.TcfCaV1Field.CMP_ID.toString(),TcfCaV1Field_js_1.TcfCaV1Field.CMP_VERSION.toString(),TcfCaV1Field_js_1.TcfCaV1Field.CONSENT_SCREEN.toString(),TcfCaV1Field_js_1.TcfCaV1Field.CONSENT_LANGUAGE.toString(),TcfCaV1Field_js_1.TcfCaV1Field.VENDOR_LIST_VERSION.toString(),TcfCaV1Field_js_1.TcfCaV1Field.TCF_POLICY_VERSION.toString(),TcfCaV1Field_js_1.TcfCaV1Field.USE_NON_STANDARD_STACKS.toString(),TcfCaV1Field_js_1.TcfCaV1Field.SPECIAL_FEATURE_EXPRESS_CONSENT.toString(),TcfCaV1Field_js_1.TcfCaV1Field.PURPOSES_EXPRESS_CONSENT.toString(),TcfCaV1Field_js_1.TcfCaV1Field.PURPOSES_IMPLIED_CONSENT.toString(),TcfCaV1Field_js_1.TcfCaV1Field.VENDOR_EXPRESS_CONSENT.toString(),TcfCaV1Field_js_1.TcfCaV1Field.VENDOR_IMPLIED_CONSENT.toString()],[TcfCaV1Field_js_1.TcfCaV1Field.SEGMENT_TYPE.toString(),TcfCaV1Field_js_1.TcfCaV1Field.PUB_PURPOSES_EXPRESS_CONSENT.toString(),TcfCaV1Field_js_1.TcfCaV1Field.PUB_PURPOSES_IMPLIED_CONSENT.toString(),TcfCaV1Field_js_1.TcfCaV1Field.NUM_CUSTOM_PURPOSES.toString(),TcfCaV1Field_js_1.TcfCaV1Field.CUSTOM_PURPOSES_EXPRESS_CONSENT.toString(),TcfCaV1Field_js_1.TcfCaV1Field.CUSTOM_PURPOSES_IMPLIED_CONSENT.toString()]]),this.base64UrlEncoder=new CompressedBase64UrlEncoder_js_1.CompressedBase64UrlEncoder,e&&e.length>0&&this.decode(e)}encode(){let e=this.encodeSegmentsToBitStrings(),i=[];return i.push(this.base64UrlEncoder.encode(e[0])),e[1]&&e[1].length>0&&i.push(this.base64UrlEncoder.encode(e[1])),i.join(".")}decode(e){let i=e.split("."),t=[];for(let e=0;e<i.length;e++){let d=this.base64UrlEncoder.decode(i[e]);switch(d.substring(0,3)){case"000":t[0]=d;break;case"011":t[1]=d;break;default:throw new DecodingError_js_1.DecodingError("Unable to decode segment '"+i[e]+"'")}}this.decodeSegmentsFromBitStrings(t)}setFieldValue(e,i){if(super.setFieldValue(e,i),e!==TcfCaV1Field_js_1.TcfCaV1Field.CREATED.toString()&&e!==TcfCaV1Field_js_1.TcfCaV1Field.LAST_UPDATED.toString()){const e=new Date,i=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()));this.setFieldValue(TcfCaV1Field_js_1.TcfCaV1Field.CREATED.toString(),i),this.setFieldValue(TcfCaV1Field_js_1.TcfCaV1Field.LAST_UPDATED.toString(),i)}}getId(){return TcfCaV1.ID}getName(){return TcfCaV1.NAME}}exports.TcfCaV1=TcfCaV1,TcfCaV1.ID=5,TcfCaV1.VERSION=1,TcfCaV1.NAME="tcfcav1";