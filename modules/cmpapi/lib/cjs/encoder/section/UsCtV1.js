"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UsCtV1=void 0;const AbstractEncodableSegmentedBitStringSection_js_1=require("./AbstractEncodableSegmentedBitStringSection.js"),EncodableBoolean_js_1=require("../datatype/EncodableBoolean.js"),EncodableFixedInteger_js_1=require("../datatype/EncodableFixedInteger.js"),EncodableFixedIntegerList_js_1=require("../datatype/EncodableFixedIntegerList.js"),DecodingError_js_1=require("../error/DecodingError.js"),UsCtV1Field_js_1=require("../field/UsCtV1Field.js"),CompressedBase64UrlEncoder_js_1=require("../datatype/encoder/CompressedBase64UrlEncoder.js");class UsCtV1 extends AbstractEncodableSegmentedBitStringSection_js_1.AbstractEncodableSegmentedBitStringSection{constructor(e){let t=new Map;t.set(UsCtV1Field_js_1.UsCtV1Field.VERSION.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(6,UsCtV1.VERSION)),t.set(UsCtV1Field_js_1.UsCtV1Field.SHARING_NOTICE.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(2,0)),t.set(UsCtV1Field_js_1.UsCtV1Field.SALE_OPT_OUT_NOTICE.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(2,0)),t.set(UsCtV1Field_js_1.UsCtV1Field.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(2,0)),t.set(UsCtV1Field_js_1.UsCtV1Field.SALE_OPT_OUT.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(2,0)),t.set(UsCtV1Field_js_1.UsCtV1Field.TARGETED_ADVERTISING_OPT_OUT.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(2,0)),t.set(UsCtV1Field_js_1.UsCtV1Field.SENSITIVE_DATA_PROCESSING.toString(),new EncodableFixedIntegerList_js_1.EncodableFixedIntegerList(2,[0,0,0,0,0,0,0,0])),t.set(UsCtV1Field_js_1.UsCtV1Field.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new EncodableFixedIntegerList_js_1.EncodableFixedIntegerList(2,[0,0,0])),t.set(UsCtV1Field_js_1.UsCtV1Field.MSPA_COVERED_TRANSACTION.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(2,0)),t.set(UsCtV1Field_js_1.UsCtV1Field.MSPA_OPT_OUT_OPTION_MODE.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(2,0)),t.set(UsCtV1Field_js_1.UsCtV1Field.MSPA_SERVICE_PROVIDER_MODE.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(2,0)),t.set(UsCtV1Field_js_1.UsCtV1Field.GPC_SEGMENT_TYPE.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(2,1)),t.set(UsCtV1Field_js_1.UsCtV1Field.GPC_SEGMENT_INCLUDED.toString(),new EncodableBoolean_js_1.EncodableBoolean(!0)),t.set(UsCtV1Field_js_1.UsCtV1Field.GPC.toString(),new EncodableBoolean_js_1.EncodableBoolean(!1)),super(t,[[UsCtV1Field_js_1.UsCtV1Field.VERSION.toString(),UsCtV1Field_js_1.UsCtV1Field.SHARING_NOTICE.toString(),UsCtV1Field_js_1.UsCtV1Field.SALE_OPT_OUT_NOTICE.toString(),UsCtV1Field_js_1.UsCtV1Field.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),UsCtV1Field_js_1.UsCtV1Field.SALE_OPT_OUT.toString(),UsCtV1Field_js_1.UsCtV1Field.TARGETED_ADVERTISING_OPT_OUT.toString(),UsCtV1Field_js_1.UsCtV1Field.SENSITIVE_DATA_PROCESSING.toString(),UsCtV1Field_js_1.UsCtV1Field.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),UsCtV1Field_js_1.UsCtV1Field.MSPA_COVERED_TRANSACTION.toString(),UsCtV1Field_js_1.UsCtV1Field.MSPA_OPT_OUT_OPTION_MODE.toString(),UsCtV1Field_js_1.UsCtV1Field.MSPA_SERVICE_PROVIDER_MODE.toString()],[UsCtV1Field_js_1.UsCtV1Field.GPC_SEGMENT_TYPE.toString(),UsCtV1Field_js_1.UsCtV1Field.GPC.toString()]]),this.base64UrlEncoder=new CompressedBase64UrlEncoder_js_1.CompressedBase64UrlEncoder,e&&e.length>0&&this.decode(e)}encode(){let e=this.encodeSegmentsToBitStrings(),t=[];if(t.push(this.base64UrlEncoder.encode(e[0])),e[1]&&e[1].length>0){!0===this.fields.get(UsCtV1Field_js_1.UsCtV1Field.GPC_SEGMENT_INCLUDED).getValue()&&t.push(this.base64UrlEncoder.encode(e[1]))}return t.join(".")}decode(e){let t=e.split("."),s=[],d=!1;for(let e=0;e<t.length;e++){let _=this.base64UrlEncoder.decode(t[e]);switch(_.substring(0,2)){case"00":s[0]=_;break;case"01":d=!0,s[1]=_;break;default:throw new DecodingError_js_1.DecodingError("Unable to decode segment '"+t[e]+"'")}}this.decodeSegmentsFromBitStrings(s),this.fields.get(UsCtV1Field_js_1.UsCtV1Field.GPC_SEGMENT_INCLUDED).setValue(d)}getId(){return UsCtV1.ID}getName(){return UsCtV1.NAME}}exports.UsCtV1=UsCtV1,UsCtV1.ID=12,UsCtV1.VERSION=1,UsCtV1.NAME="usctv1";