"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UsCaV1=void 0;const AbstractEncodableSegmentedBitStringSection_js_1=require("./AbstractEncodableSegmentedBitStringSection.js"),EncodableBoolean_js_1=require("../datatype/EncodableBoolean.js"),EncodableFixedInteger_js_1=require("../datatype/EncodableFixedInteger.js"),EncodableFixedIntegerList_js_1=require("../datatype/EncodableFixedIntegerList.js"),DecodingError_js_1=require("../error/DecodingError.js"),UsCaV1Field_js_1=require("../field/UsCaV1Field.js"),CompressedBase64UrlEncoder_js_1=require("../datatype/encoder/CompressedBase64UrlEncoder.js");class UsCaV1 extends AbstractEncodableSegmentedBitStringSection_js_1.AbstractEncodableSegmentedBitStringSection{constructor(e){let s=new Map;s.set(UsCaV1Field_js_1.UsCaV1Field.VERSION.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(6,UsCaV1.VERSION)),s.set(UsCaV1Field_js_1.UsCaV1Field.SALE_OPT_OUT_NOTICE.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(2,0)),s.set(UsCaV1Field_js_1.UsCaV1Field.SHARING_OPT_OUT_NOTICE.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(2,0)),s.set(UsCaV1Field_js_1.UsCaV1Field.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(2,0)),s.set(UsCaV1Field_js_1.UsCaV1Field.SALE_OPT_OUT.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(2,0)),s.set(UsCaV1Field_js_1.UsCaV1Field.SHARING_OPT_OUT.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(2,0)),s.set(UsCaV1Field_js_1.UsCaV1Field.SENSITIVE_DATA_PROCESSING.toString(),new EncodableFixedIntegerList_js_1.EncodableFixedIntegerList(2,[0,0,0,0,0,0,0,0,0])),s.set(UsCaV1Field_js_1.UsCaV1Field.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new EncodableFixedIntegerList_js_1.EncodableFixedIntegerList(2,[0,0])),s.set(UsCaV1Field_js_1.UsCaV1Field.PERSONAL_DATA_CONSENTS.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(2,0)),s.set(UsCaV1Field_js_1.UsCaV1Field.MSPA_COVERED_TRANSACTION.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(2,0)),s.set(UsCaV1Field_js_1.UsCaV1Field.MSPA_OPT_OUT_OPTION_MODE.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(2,0)),s.set(UsCaV1Field_js_1.UsCaV1Field.MSPA_SERVICE_PROVIDER_MODE.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(2,0)),s.set(UsCaV1Field_js_1.UsCaV1Field.GPC_SEGMENT_TYPE.toString(),new EncodableFixedInteger_js_1.EncodableFixedInteger(2,1)),s.set(UsCaV1Field_js_1.UsCaV1Field.GPC_SEGMENT_INCLUDED.toString(),new EncodableBoolean_js_1.EncodableBoolean(!0)),s.set(UsCaV1Field_js_1.UsCaV1Field.GPC.toString(),new EncodableBoolean_js_1.EncodableBoolean(!1)),super(s,[[UsCaV1Field_js_1.UsCaV1Field.VERSION.toString(),UsCaV1Field_js_1.UsCaV1Field.SALE_OPT_OUT_NOTICE.toString(),UsCaV1Field_js_1.UsCaV1Field.SHARING_OPT_OUT_NOTICE.toString(),UsCaV1Field_js_1.UsCaV1Field.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),UsCaV1Field_js_1.UsCaV1Field.SALE_OPT_OUT.toString(),UsCaV1Field_js_1.UsCaV1Field.SHARING_OPT_OUT.toString(),UsCaV1Field_js_1.UsCaV1Field.SENSITIVE_DATA_PROCESSING.toString(),UsCaV1Field_js_1.UsCaV1Field.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),UsCaV1Field_js_1.UsCaV1Field.PERSONAL_DATA_CONSENTS.toString(),UsCaV1Field_js_1.UsCaV1Field.MSPA_COVERED_TRANSACTION.toString(),UsCaV1Field_js_1.UsCaV1Field.MSPA_OPT_OUT_OPTION_MODE.toString(),UsCaV1Field_js_1.UsCaV1Field.MSPA_SERVICE_PROVIDER_MODE.toString()],[UsCaV1Field_js_1.UsCaV1Field.GPC_SEGMENT_TYPE.toString(),UsCaV1Field_js_1.UsCaV1Field.GPC.toString()]]),this.base64UrlEncoder=new CompressedBase64UrlEncoder_js_1.CompressedBase64UrlEncoder,e&&e.length>0&&this.decode(e)}encode(){let e=this.encodeSegmentsToBitStrings(),s=[];if(s.push(this.base64UrlEncoder.encode(e[0])),e[1]&&e[1].length>0){!0===this.fields.get(UsCaV1Field_js_1.UsCaV1Field.GPC_SEGMENT_INCLUDED).getValue()&&s.push(this.base64UrlEncoder.encode(e[1]))}return s.join(".")}decode(e){let s=e.split("."),t=[],_=!1;for(let e=0;e<s.length;e++){let d=this.base64UrlEncoder.decode(s[e]);switch(d.substring(0,2)){case"00":t[0]=d;break;case"01":_=!0,t[1]=d;break;default:throw new DecodingError_js_1.DecodingError("Unable to decode segment '"+s[e]+"'")}}this.decodeSegmentsFromBitStrings(t),this.fields.get(UsCaV1Field_js_1.UsCaV1Field.GPC_SEGMENT_INCLUDED).setValue(_)}getId(){return UsCaV1.ID}getName(){return UsCaV1.NAME}}exports.UsCaV1=UsCaV1,UsCaV1.ID=8,UsCaV1.VERSION=1,UsCaV1.NAME="uscav1";